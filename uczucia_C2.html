<!doctype html>
<html lang="pl">
<head>
<meta charset="utf-8"/>
<title>Uczucia - C2</title>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<style>
 body { font-family:"Segoe UI", Roboto, -apple-system, "Helvetica Neue", Arial, sans-serif; max-width:980px; margin:20px auto; padding:0 18px; color:#111; }
 .level-header { background:#b91c1c; color:#fff; padding:14px 20px; border-radius:6px; text-align:center; font-weight:700; font-size:1.1rem; margin-bottom:14px; }
 h1 { font-size:1.6rem; margin:6px 0 8px 0; }
 .muted { color:#555; }
 textarea { width:100%; min-height:140px; padding:12px; box-sizing:border-box; font-family:monospace; font-size:0.95rem; border:1px solid #ccc; border-radius:6px; }
 .controls { display:flex; gap:8px; align-items:center; margin-top:10px; flex-wrap:wrap; }
 button { border:1px solid #d1d5db; padding:8px 12px; border-radius:8px; cursor:pointer; font-weight:500; }
 #checkBtn { background:#16a34a; color:#fff; }
 #hintBtn { background:#2563eb; color:#fff; }
 #clearBtn { background:#fff; color:#000; }
 .small { color:#444; }
 table { width:100%; border-collapse:collapse; margin-top:12px; }
 th, td { padding:12px 10px; border:1px solid #eee; text-align:left; }
 th { background:#fafafa; font-weight:700; }
 .good { background:#e6f9e6; }
 .bad { background:#ffecec; }
 label.inline { display:inline-flex; align-items:center; gap:8px; font-size:0.95rem; color:#333; }
</style>
</head>
<body>

<div class="level-header">Uczucia – C2</div>

<h1>Test pamięci — pary PL-EN</h1>

<p class="muted">
Wpisz pary słów w formacie: <strong>polskie słowo - angielskie słowo</strong>.<br>
Każdy wpis w osobnej linii.<br>
(Uwaga: przecinki, średniki i nawiasy w środku frazy są częścią wyrażenia — nie rozdzielają par!)
</p>

<textarea id="answers" placeholder="Przykład: polskie - angielskie"></textarea>

<div class="controls">
<button id="checkBtn">Sprawdź</button>
<button id="hintBtn">Podpowiedź</button>
<button id="clearBtn">Wyczyść</button>

<label class="inline"><input type="checkbox" id="hideDone"> Ukryj odgadnięte słowa</label>

<div class="small">Trafione: <span id="counter">0</span> / <span id="total">0</span></div>
</div>

<div id="results"></div>

<script>
const ITEMS = [
 ["uczucie; czułość (ciepłe uczucia)", "affection"],
 ["czuły", "affectionate"],
 ["życzliwość", "amiability"],
 ["życzliwy; sympatyczny", "amiable"],
 ["kompatybilność", "compatibility"],
 ["kompatybilny; zgodny", "compatible"],
 ["zmienny; kapryśny", "fickle"],
 ["niepewny przyjaciel", "a fickle friend"],
 ["zmienna pogoda", "fickle weather"],
 ["udobruchać; ułagodzić", "to placate"],
 ["uspokajający; pojednawczy", "placatory"],
 ["pojednawczy gest", "a placatory gesture"],
 ["nie cierpieć; czuć wstręt", "to loathe"],
 ["wstręt", "loathing"],
 ["wzbudzać odrazę", "to revolt"],
 ["odraza", "revulsion"],
 ["niechętny; przeciwny", "averse"],
 ["niechęć; nienawiść", "hatred"],
 ["nieustępliwy; nieprzejednany", "implacable"],
 ["wstrętny (niegrzeczny; niemiły); okropny", "obnoxious"],
 ["przerażać; bulwersować", "to appal"],
 ["przerażający; potworny", "appalling"],
 ["obawiać się; bać się", "to dread"],
 ["obawa; strach", "dread"],
 ["obawa; lęk", "(an) apprehension"],
 ["bojaźliwy; pełen obaw", "apprehensive"],
 ["histeria", "hysterics"],
 ["histeryczny", "hysterical"],
 ["oszałamiać; ogłuszać (szokować)", "to stun"],
 ["podobać się (komuś); przemawiać (do kogoś)", "to appeal"],
 ["atrakcyjność; uznanie", "appeal"],
 ["urzekać; ujmować", "to captivate"],
 ["urzekający; ujmujący", "captivating"],
 ["zauroczenie", "(an) infatuation"],
 ["zauroczony; zakochany", "infatuated"],
 ["pragnąć", "to crave"],
 ["pragnienie", "a craving"],
 ["pragnąć; tęsknić", "to hanker"],
 ["pragnienie; tęsknota", "a hankering"],
 ["tęsknić; pragnąć (czegoś, co jest nieosiągalne)", "to yearn"],
 ["tęsknota; pragnienie", "(a) yearning"],
 ["pożądać", "to covet"],
 ["pożądliwy", "covetous"],
 ["wprawiać w radosne podniecenie; upajać", "to exhilarate"],
 ["radośnie podniecenie; euforia", "exhilaration"],
 ["radować się", "to rejoice"],
 ["radość", "rejoicing"],
 ["nie posiadać się z radości; radować się", "to exult"],
 ["radość", "exultation"],
 ["pełen radości; rozradowany", "exultant"],
 ["ściskać; przyciskać", "to clasp"],
 ["uścisk", "a clasp"],
 ["wprawiać w zakłopotanie; zbijać z tropu", "to confound"],
 ["nieskazitelny", "immaculate"],
 ["w idealnym stanie", "in immaculate condition"],
 ["drobny; drobnostkowy", "petty"],
 ["małostkowa osoba", "a petty person"],
 ["banalny; sztampowy", "trite"],
 ["pogardzać; lekceważyć", "to disdain"],
 ["pogarda; lekceważenie", "disdain"],
 ["pogardliwy; lekceważący", "disdainful"],
 ["agonia; męka", "(an) agony"],
 ["żal", "(a) grievance"],
 ["zażalenie; skarga", "a grievance"],
 ["poczucie krzywdy", "sense of grievance"],
 ["przygnębiać; martwić (kogoś)", "to distress"],
 ["przygnębienie; zmartwienie", "distress"],
 ["wezwanie pomocy", "a distress call"],
 ["obrażony; nadąsany", "sullen"],
 ["zły; pogniewany", "cross"],
 ["wściekły", "livid"],
 ["wrzeć; kipieć (ze złości)", "to seethe"],
 ["wrzący z gniewu", "seething"],
 ["mediować; pojednywać", "to conciliate"],
 ["mediacja; pojednanie", "conciliation"],
 ["rozjemczy; pojednawczy", "conciliatory"],
 ["ułagodzić; udobruchać", "to appease"],
 ["ułagodzenie; udobruchanie", "appeasement"]
].map(pair => ({pl: pair[0], en: pair[1]}));

/* --- poniżej skrypt sprawdzania pozostaje bez zmian --- */

let matched = [];
let order = ITEMS.map((_,i)=>i);
let showAll = false;

document.getElementById('total').textContent = ITEMS.length;

function normalize(s){
 return String(s||'').toLowerCase().normalize('NFD')
 .replace(/[\u0300-\u036f]/g,'')
 .replace(/[.:"]/g,'')
 .replace(/\s+/g,' ')
 .trim();
}

const HYPHENS = ['-','\u2010','\u2011','\u2012','\u2013','\u2014','\u2212','\uFE58','\uFE63','\uFF0D'];

function findSeparatorIndex(s){
 for(let i=0;i<s.length;i++){
   const ch=s[i];
   const before=i>0?s[i-1]:'';
   const after=i<s.length-1?s[i+1]:'';
   if(HYPHENS.includes(ch) && (/\s/.test(before) || /\s/.test(after))) return i;
 }
 return -1;
}

function parsePairFromEntry(entry){
 const s=String(entry||'').trim();
 if(!s) return null;
 const idx=findSeparatorIndex(s);
 if(idx>=0){
   const left=s.slice(0,idx).trim();
   const right=s.slice(idx+1).trim();
   if(left && right) return [left,right];
 }
 const m=s.match(/^(.+?)\s*[-–—]\s*(.+)$/);
 if(m) return [m[1].trim(), m[2].trim()];
 return null;
}

function render(){
 const results=document.getElementById('results');
 results.innerHTML='';
 const table=document.createElement('table');
 table.innerHTML='<thead><tr><th>#</th><th>Angielski</th><th>Polski</th></tr></thead>';
 const tbody=document.createElement('tbody');
 let visibleIndex=0;

 for(const origIdx of order){
   if(document.getElementById('hideDone').checked && matched.includes(origIdx)) continue;
   const it=ITEMS[origIdx];
   const tr=document.createElement('tr');
   if(matched.includes(origIdx)) tr.classList.add('good');
   else if(showAll) tr.classList.add('bad');
   const enText=(matched.includes(origIdx)||showAll)?it.en:'— — —';
   tr.innerHTML=`<td>${visibleIndex+1}</td><td>${enText}</td><td>${it.pl}</td>`;
   tbody.appendChild(tr);
   visibleIndex++;
 }

 table.appendChild(tbody);
 results.appendChild(table);
 document.getElementById('counter').textContent = matched.length;
}

function autoCheck(){
 const raw=document.getElementById('answers').value||'';
 const entries=raw.split(/\n+/).map(s=>s.trim()).filter(Boolean);
 const newly=[];
 for(const e of entries){
   const pair=parsePairFromEntry(e);
   if(!pair) continue;
   const [A,B]=pair;
   const left=normalize(A);
   const right=normalize(B);
   for(const idx of order){
     if(matched.includes(idx)) continue;
     const it=ITEMS[idx];
     const plN=normalize(it.pl);
     const enN=normalize(it.en);
     if((plN===left&&enN===right)||(plN===right&&enN===left)){
       newly.push(idx);
       break;
     }
   }
 }
 if(newly.length){
   for(const idx of newly){
     order=order.filter(x=>x!==idx);
     order.push(idx);
     matched.push(idx);
   }
   render();
 }
}

document.getElementById('answers').addEventListener('input',()=>{showAll=false;autoCheck();});
document.getElementById('checkBtn').addEventListener('click',()=>{showAll=true;render();});
document.getElementById('hintBtn').addEventListener('click',()=>{
 showAll=false;render();
 const tbody=document.querySelector('#results tbody');
 if(!tbody) return;
 let r=0;
 for(const origIdx of order){
   if(document.getElementById('hideDone').checked && matched.includes(origIdx)) continue;
   const tr=tbody.children[r];
   if(!matched.includes(origIdx)) tr.children[1].textContent=ITEMS[origIdx].en;
   r++;
 }
});
document.getElementById('clearBtn').addEventListener('click',()=>{
 document.getElementById('answers').value='';
 matched=[];
 order=ITEMS.map((_,i)=>i);
 showAll=false;
 document.getElementById('hideDone').checked=false;
 render();
});
document.getElementById('hideDone').addEventListener('change',()=>render());

render();
</script>

</body>
</html>
